profile:
  env: "dev"

synp:
  # WebSocket 配置
  websocket:
    host: "0.0.0.0"
    port: 17001
    compression:
      enabled: true
      # 服务端压缩时使用的滑动窗口大小 取值范围: 8-15 = 2^8 - 2^15 = 256B - 32KB
      server_max_window_bits: 15
      server_no_context_takeover: false
      # 客户端压缩时使用的滑动窗口大小 取值范围: 8-15 = 2^8 - 2^15 = 256B - 32KB
      client_max_window_bits: 15
      client_no_context_takeover: false
      level: 6

  # 编解码器配置 ( json / proto )
  codec:
    type: "json"

  # 连接配置
  conn:
    # 连接生命周期处理器配置
    handler:
      cache_request_timeout: 10s
      cache_expiration: 10s

    # 连接管理器配置
    manager:
      read_timeout: 15s
      write_timeout: 10s
      init_retry_interval: 1s
      max_retry_interval: 5s
      max_retry_count: 3
      send_buffer_size: 256
      receive_buffer_size: 256
      close_timeout: 1s

  # 网关事件消费者配置
  gateway:
    consumer:
      # downstream 消息消费者
      event_message_downstream:
        topic: "event.message.downstream"
        group_id: "synp-gateway-downstream"
        partitions: 6

# Redis 配置
redis:
  addr: 192.168.3.3:6379
  password: "<passwd>"

# Kafka 配置
# 使用 SASL/SCRAM-SHA-256 + TLS 认证
kafka:
  # Kafka Broker
  brokers:
    - "192.168.3.3:9093"
    - "192.168.3.3:9193"
    - "192.168.3.3:9293"

  # Producer 配置
  producer:
    required_acks: -1            # all
    compression: "snappy"        # 使用 snappy 压缩
    max_message_bytes: 1024000   # 最大消息大小 1024000字节 = 1MB
    retry_max: 3                 # 最大重试次数 3
    batch_size: 100              # 批量大小 100
    batch_timeout: 10ms          # 批量超时 10ms
    write_timeout: 10s           # 写入超时 10s
    idempotent_enabled: true     # 启用幂等性

  # Consumer 配置
  consumer:
    read_timeout: 10s            # 读取超时 10s
    commit_interval: 1s          # 每秒提交一次
    start_offset: -1             # 从最新消息开始（kafka.LastOffset）
    min_bytes: 1                 # 最小 1 字节
    max_bytes: 10e6              # 最大 10MB
    max_wait: 500ms              # 最大等待 500ms

  # TLS 配置
  tls:
    # CA 证书文件路径（必需）
    ca_file: |
      -----BEGIN CERTIFICATE-----
      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
      cPxmdBM=
      -----END CERTIFICATE-----

  # SASL/SCRAM-SHA-256 认证配置
  sasl:
    username: "synp-kafka-user"
    password: "synp-kafka-secret"
    # 提示：建议使用环境变量存储密码
    # password: "${KAFKA_PASSWORD}"

jwt:
  issuer: "hermet-access"
  public: |
    -----BEGIN PUBLIC KEY-----
    MCowBQYDK2VwAyEA818wiIDR2aqxvLKcyQL2qvVCYlSs2A/izQi/K109rlU=
    -----END PUBLIC KEY-----
