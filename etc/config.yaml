profile:
  env: "dev"

synp:
  websocket:
    host:
    port:
    compression:
      enabled: true
      # 服务端压缩时使用的滑动窗口大小 取值范围: 8-15 = 2^8 - 2^15 = 256B - 32KB
      server_max_window_bits: 15
      server_no_context_takeover: false
      # 客户端压缩时使用的滑动窗口大小 取值范围: 8-15 = 2^8 - 2^15 = 256B - 32KB
      client_max_window_bits: 15
      client_no_context_takeover: false
      level: 6

handler:
  event:
    cache_request_timeout: 10s
    cache_expiration: 10s
  message:
    frontend:
      topic: "frontend"
      on_receive_timeout: 10s

# Kafka 配置
# 使用 SASL/SCRAM-SHA-256 + TLS 认证
kafka:
  # Kafka Broker
  brokers:
    - "kafka-1.example.com:9093"
    - "kafka-2.example.com:9093"
    - "kafka-3.example.com:9093"

  # Producer 配置
  producer:
    required_acks: -1            # all
    compression: "snappy"        # 使用 snappy 压缩
    max_message_bytes: 1024000   # 最大消息大小 1024000字节 = 1MB
    retry_max: 3                 # 最大重试次数 3
    batch_size: 100              # 批量大小 100
    batch_timeout: 10ms          # 批量超时 10ms
    write_timeout: 10s           # 写入超时 10s
    idempotent_enabled: true     # 启用幂等性

  # Consumer 配置
  consumer:
    read_timeout: 10s            # 读取超时 10s
    commit_interval: 1s          # 每秒提交一次
    start_offset: -1             # 从最新消息开始（kafka.LastOffset）
    min_bytes: 1                 # 最小 1 字节
    max_bytes: 10e6              # 最大 10MB
    max_wait: 500ms              # 最大等待 500ms

  # TLS 配置
  tls:
    # CA 证书文件路径（必需）
    ca_file: "/etc/certs/kafka/ca.crt"
    # 是否跳过证书验证（生产环境必须设置为 false）
    insecure_skip_verify: false

  # SASL/SCRAM-SHA-256 认证配置
  sasl:
    username: "your-kafka-username"
    password: "your-kafka-password"
    # 提示：建议使用环境变量存储密码
    # password: "${KAFKA_PASSWORD}"
